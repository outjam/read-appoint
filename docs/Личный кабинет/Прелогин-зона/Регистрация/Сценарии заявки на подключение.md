# Сценарии заявки на подключение

**Мерчант заврешает свой сценарий создания новой заявки после подтвердения телефона**

**Пользователь мерчанта был заблокирован и вводит свой номер телефона**

**Пользователь мерчанта был заблокирован и вводит свою почту**

**Мерчант создал заявку на подключение, администратор сервиса ещё не взял в работу**

**Мерчант создал заявку на подключение, администратор сервиса взял в работу завяку мерчанта**

**Мерчант создал заявку на подключение, администратор подтвердил заявку мерчанта**

**Мерчант авторизуется в личнм кабинете (Заявка создана или в работе)**
  
**Мерчант вводит номер телефона который уже используется в созданной заявке**

**Мерчант вводит номер телефона который уже используется в созданном бренде**

**Мерчант вводит почту которая уже используется в созданной заявке**

**Мерчант вводит почту которая уже используется в созданном бренде**

**Мерчант вводит ИНН который уже используется в созданной заявке**

**Мерчант вводит ИНН который уже используется в созданном бренде**

**Мерчант подключен к сервису через YCLIENTS и пытается подать заявку на подключение**

**При перезагрузке страницы данные и шага 1 и шага не должны пропасть**

<!-- ## Use Cases

### Мерчант
- Заполняет контактные данные представителя для связи с appoint.
- Подтверждает номер телефона через SMS-код для гарантированной связи.
- Предоставляет юридическую информацию о компании/бренде для дальнейшей проверки.
- Передаёт достоверные данные, необходимые для прохождения модерации и подтверждения статуса юридического лица или ИП.
- Получает информацию о статусе своей заявки после отправки формы.
- Получает уведомления о решении по заявке по электронной почте.
- **Важно:** После отправки заявки данные нельзя изменить. В случае отказа администратора мерчант может подать заявку заново.

### Сервис (appoint)
- Администратор appoint получает корректный набор данных для оперативной коммуникации с представителем бренда.
- Администратор appoint получает структурированные юридические данные, необходимые для проверки существования, статуса и надёжности юридического лица.
- Система автоматически проверяет ИНН через сервис DaData для ускорения и повышения точности ввода данных.
- Сервис регистрирует все шаги подачи заявки для последующего аудита и аналитики.
- Сервис информирует мерчанта о смене статуса заявки: «На рассмотрении», «Отклонена», «Подтверждена».
- Информация о заявке формирует основу для следующих этапов — модерация бренда, подключение к сервисам и авторизация мерчанта.
- **Предотвращение дубликатов:**  
  - Если после подтверждения номера телефона система определяет, что у пользователя уже есть активная заявка, отображается алерт:  
    > «Вы уже зарегистрированы в системе appoint».  
  - Пользователю предлагается:  
    1. Дождаться решения по текущей заявке.  
    2. После отказа администратора подать новую заявку или авторизоваться для создания нового бренда через свой профиль.

---

## Сценарии мерчанта

### 1. Мерчант первый раз в системе
- Пользователь ранее не регистрировался и не создавал заявки.  
- Проходит шаг 1 (данные представителя) и подтверждение телефона через SMS.  
- Вводит юридические данные на шаге 2.  
- После отправки заявки видит статусный экран: «Заявка отправлена» и ожидает модерации.  

### 2. Мерчант имеет активную заявку на подключение
- Пользователь уже отправил заявку, которая находится в статусе «На рассмотрении» или «Ожидает уточнений».  
- После подтверждения телефона выводится алерт:  
  > «Вы уже зарегистрированы в системе appoint».  
- Пользователю нельзя редактировать заявку. Необходимо дождаться решения администратора.  

### 3. Мерчант уже есть в системе и имеет хотя бы один замодерируемый бренд
- Пользователь зарегистрирован, есть хотя бы один бренд, который прошёл или проходит модерацию.  
- Система позволяет создавать новый бренд через свой профиль.  

### 4. Мерчант пытается создать заявку с уже существующим ИНН
- Проверка ИНН через внутренние сервисы и DaData.  
- Если ИНН уже зарегистрирован, выводится сообщение о существовании бренда с этим ИНН.  
- Пользователю предлагается использовать другой ИНН для нового бренда или дождаться отказа, если это попытка повторной подачи той же компании.  

### 5. Мерчант не завершил подтверждение телефона
- Доступ к шагу 2 и отправке заявки заблокирован до подтверждения телефона.  
- Пользователю предлагается повторно запросить SMS-код.  

### 6. Мерчант пытается изменить данные после отправки
- **Изменение данных невозможно.**  
- Единственный вариант — дождаться отказа администратора и подать заявку заново. -->