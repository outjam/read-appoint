# Статус видимости сущностей

Сущности внутри сервиса **appoint** обладают статусами видимости, которые определяют, отображаются ли они в каталоге, доступны ли пользователям, а также присутствуют ли в системе физически.

**Поле статуса:**
```json
status_published: "published" | "hidden" | "blocked" | "soft_deleted" | "deleted"
```

---

| Сущность       | Кто управляет статусом            |
| -------------- | --------------------------------- |
| **Компания**       | Система / Администратор / Мерчант |
| **Филиал**         | Система / Администратор / Мерчант |
| **Локации**        | Администратор                     |
| **Специалист**     | Администратор / Мерчант           |
| **Исполнитель**    | Администратор                     |
| **Событие / Услуга** | Система / Администратор / Мерчант |
| **История**        | Система / Администратор           |
| **Подборка**       | Система / Администратор           |

---

## Опубликован — `published`
**Сущность доступна и отображается в каталоге.**

Это активное состояние, при котором объект виден пользователям и участвует во всех бизнес-процессах: бронированиях, отображении на витрине, поиске и подборках.

**Основные моменты:**
- Сущность доступна клиентам.
- Отображается в каталоге и поиске.
- Используется в механиках системы *(бронирования, расписание и др.)*.

**Типичные переходы:**
- → `hidden` — скрыть из каталога
- → `blocked` — блокировка администратором
- → `soft_deleted` — удаление пользователем

---

## Не опубликован — `hidden`
**Сущность скрыта из каталога, но остаётся активной внутри системы.**

**Используется в случаях:**
- временное скрытие компании или услуги;
- подготовка данных перед публикацией;
- скрытие филиалов или специалистов;
- скрытие услуг, которые требуют обновления.

**Основные моменты:**
- Пользователи не видят объект.
- Сущность доступна для редактирования внутри кабинета.
- Может быть вновь опубликована.

**Типичные переходы:**
- → `published` — публикация
- → `blocked` — принудительное скрытие системой / администратором
- → `soft_deleted` — удаление

---

## Заблокирован — `blocked`
**Принудительное скрытие сущности системой или администратором**

Используется в случаях нарушений, жалоб, несоответствий данным или временных ограничений.

**Причины блокировки:**
- некорректные данные;
- нарушение правил сервиса;
- жалобы клиентов;
- проблемы модерации.

**Основные моменты:**
- Сущность не отображается в каталоге.
- Мерчант не может самостоятельно вернуть статус `published`.
- Требуется проверка и действие администратора.

**Типичные переходы:**
→ `hidden` / `published` — разблокировка
→ `soft_deleted` — удаление
→ `deleted` — полное удаление системой

---

## Удалён — `soft_deleted`
**Мягкое удаление (архивное состояние).**

Сущность исключается из каталога и интерфейса, но остаётся в базе данных:

**Используется для:**
- логов и истории действий,
- возможности восстановления,
- сохранности связанных данных.
  
**Основные моменты:**
- Сущность невидима и недоступна пользователям.
- Может быть восстановлена администратором.
- Является стандартным сценарием удаления.

**Типичные переходы:**
- → `hidden` / `published` — восстановление
- → `deleted` — полное удаление системой или администратором

---

## Полное удаление — `deleted`
**Невосстановимое состояние.**

Сущность физически удаляется из системы и больше не подлежит восстановлению.

**Используется:**
- системой *(по retention-policy)*,
- администратором *(по запросу или правилам модерации)*.

**Основные моменты:**
- Все данные и связи удаляются.
- Недоступно восстановление.
- Полное исчезновение сущности из системы.


:::info Справка:
Полное описание сценария удаления компании см. в разделе: Удаление компании
:::